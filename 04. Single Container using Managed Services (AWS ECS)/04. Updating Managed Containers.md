# **Updating Managed Containers (AWS ECS)**

This section explains how to properly **update a running container in AWS ECS** after modifying your application code.

### **1. Update Your Local Image**

When you change your source code (e.g., remove extra exclamation marks), you must:

1. Rebuild your Docker image:

   ```bash
   docker build -t my-image .
   ```
2. Tag it again for Docker Hub:

   ```bash
   docker tag my-image username/repo:latest
   ```
3. Push the updated image to Docker Hub:

   ```bash
   docker push username/repo:latest
   ```

AWS **will not automatically pull** the newer version, which is good — it prevents unexpected updates.

---

### **2. Tell AWS ECS About the Updated Image**

To deploy the new version, you must manually create a **new task definition revision**.

Steps:

1. Go to **ECS → Clusters → default → Tasks → Task Definitions**.
2. Select your task definition.
3. Click **Create new revision**.

   * All existing settings stay the same.
   * ECS will now use the updated image when launching the new revision.

---

### **3. Update the ECS Service**

Once the new task definition revision is created:

1. Click **Actions → Update service**.
2. Keep all your existing service settings.
3. Click **Skip to review → Update service**.

ECS will now:

* Pull the latest Docker image from Docker Hub.
* Stop the old task.
* Launch a new task using the updated revision.

You can monitor progress in your service’s **Tasks** tab:

* `Provisioning` → `Pending` → `Running`.

---

### **4. Access the Updated Container**

When the new task starts:

* Open the task details.
* Copy the **public IP address**.
* Access the updated app in your browser.

Note:
**The public IP will change** with each new task revision.
This is normal — ECS assigns a fresh IP for each task.

To avoid changing IPs, you can:

* Use a load balancer, or
* Connect a domain name using AWS tools.

---

### **Summary**

To update ECS-managed containers:

1. Rebuild and push your updated image.
2. Create a new task definition revision.
3. Update the service to use the new revision.
4. AWS ECS pulls the new image and deploys the new task.
